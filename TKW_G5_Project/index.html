<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="includes/style.css">
    <script src="https://kit.fontawesome.com/6dd3e0021a.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Helios</title>
</head>

<body>
    <header>
        <div class="navbar">
            <a href="index.html">
                <img class="logo" src="user/imgs/logo.avif">
            </a>
            <ul class="links">
                <li class="hideMenuBar"><a class="active-menu" href="index.html">Home</a></li>
                <li class="hideMenuBar"><a href="user/about-page.html">About</a></li>
                <li class="hideMenuBar"><a href="user/contact-page.html">Contact</a></li>
                <li class="hideMenuBar">
                    <a href="user/find-products.html" id="store">Danh Mục Sản Phẩm</a>
                    <!-- Trong store có drop down menu -->
                    <div class="dropdown">
                        <ul class="menu-inside">
                            <li><a href="#" id="loai-sp">Quần</a>
                                <ul class="menu-inside2 cac-loai-quan">
                                    <li><a href="user/find-products.html?filter=quan-ngan">Quần ngắn</a></li>
                                    <li><a href="user/find-products.html?filter=quan-dai">Quần dài</a></li>
                                </ul>
                            </li>

                            <li><a href="#" id="loai-sp">Áo</a>
                                <ul class="menu-inside2 cac-loai-ao">
                                    <li><a href="user/find-products.html?filter=ao-thun">Áo thun</a></li>
                                    <li><a href="user/find-products.html?filter=ao-khoac">Áo khoác</a></li>
                                </ul>
                            </li>
                            <li><a href="#" id="loai-sp">Phụ kiện</a>
                                <ul class="menu-inside2 cac-loai-phukien">
                                    <li><a href="user/find-products.html?filter=phukien-balo">Balo</a></li>
                                    <li><a href="user/find-products.html?filter=phukien-tui">Túi</a></li>
                                </ul>
                            </li>

                        </ul>
                    </div>
                </li>
            </ul>

            <ul class="ults">
                <li class="hideMenuBar">
                    <!-- chỗ này m làm một js, trước khi đăng nhập thì link sigIn-signup/signIn-Up;
                    sau khi đăng nhập là link information/address -->
                    <a id="user-login" onclick="dieuHuongUser()">
                        <div class="login-btn">
                            <i class="fa-solid fa-user"></i>
                        </div>
                    </a>
                </li>

                <li class="hideMenuBar">
                    <a>
                        <div class="search_btn">
                            <form method="get" action="user/find-products.html?search=">
                                <input type="search" placeholder="Search" class="search-text" required name="search">
                                <button class="nut-search"><i class="fa-solid fa-magnifying-glass"></i></button>
                            </form>
                        </div>
                    </a>
                </li>

                <li class="hideMenuBar">
                    <a>
                        <div class="cart-btn">
                            <i class="fa-solid fa-cart-shopping" id="cart-icon"></i>
                        </div>
                    </a>
                </li>

                <li onclick="showSidebar()" class="btn-menu">
                    <a>
                        <div class="menubar">
                            <i class="fa-solid fa-bars" id="menubar"></i>
                        </div>
                    </a>
                </li>

                <li class="hideMenuBar">
                    <a href="#" style="cursor: pointer;" hidden id="logout">
                        <div >
                            <i class="fa-solid fa-right-from-bracket fa-2xl" style="color: #ffffff;"></i>
                        </div>
                    </a>
                </li>
            </ul>

            <!-- Side bar menu -->
            <ul class="sidebar">
                <li onclick="hideSideBar()"><a href="#"><i class="fa-solid fa-xmark"></i></a></li>
                <li><a href="../TKW_G5_Project/index.html">Home</a></li>
                <li><a href="../TKW_G5_Project/user/about-page.html">About</a></li>
                <li><a href="../TKW_G5_Project/user/contact-page.html">Contact</a></li>
                <li><a href="../TKW_G5_Project/index.html">Store</a></li>
                <li><a href="../TKW_G5_Project/user/signIn-signUp/signIn-Up.html">Login</a></li>
                <li><a href="../TKW_G5_Project/user/cart-page.html">Shopping cart</a></li>
            </ul>

            <!-- Shopping cart  -->
            <div class="cart">
                <h2 class="cart-title">Giỏ hàng</h2>

                <!-- content -->
                <div class="cart-content" id="cart-content">

                </div>

                <div class="total">
                    <div class="total-title">Tổng tiền</div>
                    <div class="total-price" id="total-price">0</div>
                </div>

                <div style="display: flex; justify-content: center;align-items: center;">
                    <button type="button" class="btn-buy" onclick="muaHang()">Buy Now</button>
                    <a href="user/cart-page.html" style="text-decoration: none;"><button type="button"
                            class="btn-view">View Cart</button></a>
                </div>
                <i class="fa-solid fa-xmark" id="close-cart"></i>
            </div>

        </div>
    </header>

    <main style="display: block; margin-top: 100px;">

        <!-- Slide giới thiệu -->
        <div class="slideshow-container">

            <!-- Full-width images with number and caption text -->
            <div class="mySlides">
                <img src="user/imgs/slide1.webp" style="width:100%; height: 100%;">
            </div>

            <div class="mySlides">
                <img src="user/imgs/slide2.webp" style="width:100%; height:100%; ">

            </div>

            <div class="mySlides">
                <img src="user/imgs/slide3.webp" style="width:100%; height:100%;">
            </div>

            <!-- Next and previous buttons -->
            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        <!-- The dots/circles -->
        <div style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>

        <!-- Mục quần áo nổi bật -->
        <div id="wrapper">
            <div class="headline">
                <h3>Sản phẩm nổi bật</h3>
            </div>

            <!-- Nút lọc sản phẩm -->
            <div class="container-filter">
                <button class="active-filter" data-name="all">Tất cả sản phẩm</button>
                <button data-name="ao">Áo</button>
                <button data-name="quan">Quần</button>
                <button data-name="phukien">Phụ kiện</button>
            </div>

            <!-- Thông tin sản phẩm -->
            <ul class="products">
            </ul>

            <!-- Nút xem tất cả điều hướng đến trang sản phẩm  -->
            <div style="text-align: center; padding: 25px 0px; padding-top: 0px;">
                <a href="user/find-products.html"
                    style="padding: 10px 20px; border: 2px solid white; border-radius: 5px;color: #fff;text-decoration: none;font-size: 23px;">Xem
                    tất cả</a>
            </div>
        </div>

        <!-- thời gian đếm ngược -->
        <div class="container-time">
            <div class="sub-timer">
                <h1 id="day" class="digit">00</h1>
                <p class="digit_name">Days</p>
            </div>
            <div class="sub-timer">
                <h1 id="hour" class="digit">00</h1>
                <p class="digit_name">Hours</p>
            </div>
            <div class="sub-timer">
                <h1 id="min" class="digit">00</h1>
                <p class="digit_name">Minutes</p>
            </div>
            <div class="sub-timer">
                <h1 id="sec" class="digit">00</h1>
                <p class="digit_name">Seconds</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container-footer">
            <div class="footer_1">
                <img class="logo" src="user/imgs/logo.avif">
                <p>Thương hiệu thời trang số một Việt Nam.</p>
                <div class="f_icon">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fa-brands fa-youtube"></i>
                    <i class="fa-brands fa-tiktok"></i>
                </div>
            </div>

            <div class="footer_2">
                <h3>SHOPPING</h3>
                <a href="index.html">Home Page</a>
                <a href="index.html">About</a>
                <a href="index.html">Contact</a>
                <a href="index.html">Store</a>
            </div>

            <div class="footer_3">
                <h3>HỖ TRỢ</h3>
                <a href="#">Chính sách</a>
                <a href="#">Liên hệ với chúng tôi</a>
                <a href="#">Phương thức thanh toán</a>
                <a href="#">Vận chuyển</a>
            </div>

            <div class="footer_4">
                <hr>
                <h3>Đăng ký nhận bản tin</h3>
                <input id="input_email" type="email" placeholder="Email của bạn">
                <input id="input_sub" type="button" value="Đăng ký">
            </div>

        </div>
    </footer>
</body>

<script src="includes/script.js"></script>
<script src="admin/datas/sanpham.js"></script>
<script src="/user/information/infor.js"></script>
<script>
    let data;
    $(document).ready(function () {
        data = arraySanPham;
        themDuLieu(data);
    });

    function isEmpty(input) {
        return (input == null || input.length == 0);
    }

    function chuyenHuongTPSP() {
        //alert("Test");
        window.location.replace("user/find-products.html");
    }
    function layDuongDanTuongDoi(giaTri) {
        giaTri = giaTri.split("/").pop();
        return giaTri;
    }
    function themDuLieu(data) {
        let lST = localStorage.getItem("sp_them");
        let dsThem;
        if (!isEmpty(lST)) {
            dsThem = JSON.parse(lST);
            for (let i = dsThem.length - 1; i >= 0; i--) {
                data.push(dsThem[i]);
            }
        }

        let lSS = localStorage.getItem("sp_sua");
        if (!isEmpty(lSS)) {
            dsSua = JSON.parse(lSS);
            dsSua.some((element, index) => {
                data.some((dt, i) => {
                    if (element["id"] == dt["id"]) {
                        data[i] = dsSua[index];
                        return true;
                    }
                });
            });
        }

        let lSX = localStorage.getItem("sp_xoa");
        if (!isEmpty(lSX)) {
            dsXoa = JSON.parse(lSX);
            dsXoa.forEach(element => {
                data.some((dt, i) => {
                    if (element == dt["id"]) {
                        data.splice(i, 1);
                        return true;
                    }
                });
            });
        }
        //--
        for (let i = 0; i < data.length; i++) {
            if (i == 12) break;
            const productItem = document.createElement('div');
            productItem.className = 'product-item';

            const productTop = document.createElement('div');
            productTop.className = 'product-top';

            const productThumb = document.createElement('a');
            productThumb.href = 'product_detail/index.html?id=' + i;
            productThumb.className = 'product-thumb';

            const productImg = document.createElement('img');
            productImg.src = 'admin/imgs/products/' + layDuongDanTuongDoi(data[i]["hinh_truoc"]);
            productImg.alt = 'Hinh anh cua sp ' + i;
            productThumb.appendChild(productImg);

            const buyNow = document.createElement('a');
            buyNow.href = '';
            buyNow.className = 'buy-now';
            buyNow.textContent = 'Mua ngay';


            const addCart = document.createElement('i');
            addCart.className = 'fa-solid fa-bag-shopping add-cart';
            addCart.onclick = function () {
                themVaoGioHang(data[i]["id"], data[i]["ten"], data[i]["dongia"], layDuongDanTuongDoi(data[i]["hinh_truoc"]));
                alert('Thêm thành công!')
            };
            productTop.appendChild(productThumb);
            productTop.appendChild(buyNow);
            productTop.appendChild(addCart);

            const productInfo = document.createElement('div');
            productInfo.className = 'product-info';

            const productCart = document.createElement('a');
            productCart.href = '';
            productCart.className = 'product-cart';
            productCart.textContent = data[i]["danhmuc"];

            const productName = document.createElement('a');
            productName.href = 'product_detail/index.html?id=' + i;
            productName.className = 'product-name';
            productName.textContent = data[i]["ten"];;

            const productPrice = document.createElement('div');
            productPrice.className = 'product-price';
            productPrice.textContent = parseInt(data[i]["dongia"]).toLocaleString('it-IT', { style: 'currency', currency: 'VND' });

            productInfo.appendChild(productCart);
            productInfo.appendChild(productName);
            productInfo.appendChild(productPrice);

            productItem.appendChild(productTop);
            productItem.appendChild(productInfo);

            const productLi = document.createElement('li');
            productLi.appendChild(productItem);
            let dtName = data[i]["loaihang"].split("-")[0];
            productLi.dataset.name = dtName;

            document.querySelector('.products').appendChild(productLi);
        }
    }
    function dieuHuongUser() {
        let id = localStorage.getItem("user_id");
        if (!isEmpty(id)) {
            window.location.href = 'user/information/infor.html';
        } else {
            window.location.href = '../TKW_G5_Project/user/signIn-signUp/signIn-Up.html';
        }
    }
    $(document).ready(function () {
        var loginButton = $('#logout')[0];
        let id = localStorage.getItem("user_id");
        if (!isEmpty(id)) {
            loginButton.removeAttribute("hidden");
            loginButton.addEventListener('click', () =>{
                localStorage.removeItem("user_id");
                window.location.href = '../TKW_G5_Project/user/signIn-signUp/signIn-Up.html';
            });
        }
    });
</script>

</html>